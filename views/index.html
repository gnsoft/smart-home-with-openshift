<!DOCTYPE html><html><head>
<meta charset="utf-8" />
<meta http-equiv="Content-Security-Policy"/>
<meta http-equiv="Access-Control-Allow-Origin"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta name="description" content="Tizen basic template generated by Tizen Web IDE"/>
<title></title>
<link rel="stylesheet" type="text/css" media="screen,print" href="img/style.css">
<script type="text/javascript" src="js/socket.js"></script>
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<style type="text/css">
	body {margin:0 auto;background:#000;line-height:100%;overflow:hidden;font-family:Arial, Helvetica, sans-serif;
		font-family: Courier, monospace;
		color: lightgreen;
		text-wrap: normal;
		word-wrap: break-word;	
	}
	</style>
</style>
</head><body>Smart Home
<script type='text/javascript' charset='utf8'>
$(document).ready(function() {
	function append(data) {
		var tty = $('#tty');
		tty.append(data);
		while ((tty.offset().top + tty.height()) > $(window).height()) {
			tty.first().contents().first().remove();
		}
	}
	//var tty = io.connect('/tty');
	//console.log('Socket connected', tty);
	
	
	
	//socket = io({'reconnection':false,'force new connection': true});//alert("j1");
	socket = io.connect('http://smart-home-smart-home-with-openshift.0ec9.hackathon.openshiftapps.com/',{'reconnection':false,'force new connection': true});//alert("j1");
	
	socket.on('connect', function(){console.log("S-connect");
		socket.removeEventListener('connect');
		//socket.emit('authorizeS', {platform:'android', store:gConfig.appStore, version:gConfig.version, socketID:gConfig.socketID});//version:
		//game.waitingRoomScene.connected();
	});
		
	socket.on('message2', function(data) {alert("message2");
		data = data.replace(/\n/g, '<br/>');
		data = data.replace(/ /g, '&nbsp;');
		append(data);
	});	
		
	socket.on('message', function(data) {alert("message");
		data = data.replace(/\n/g, '<br/>');
		data = data.replace(/ /g, '&nbsp;');
		append(data);
	});
	var cmd = '';
	$(window).bind('keypress', function(event) {
		var key = String.fromCharCode(event.charCode);
		console.log('key:', key, event);
		if ((key == '\r') || (key == 'u')) {
			socket.emit('message', cmd);
			cmd = '';
			append('<br/>');
		}
/*
		else if (key == 3) {
			tty.emit('message', '\x03');
			cmd = '';
			append('^C<br/>');
		}
*/
		else {
			cmd = cmd + key;
			append(key);
		}
	});
	
	
	//--------------------
});
</script>
<div id='tty'></div>
</body></html>